<!DOCTYPE html>
<html>
<% include partials/head %>
<% include partials/header %>

<% include partials/navbar %>
<body>
<div class="container">
    <% include partials/breadcrumb %>
    <div class="col-sm-6 col-sm-offset-3">
        <h1><span class="fa fa-gift"></span> Kochbox bestellen</h1>
        <% if (typeof message !== 'undefined') { %>
        <div class="alert alert-success">
            <%= message %>
        </div>
        <% } %>
        <form action="/upload" method="post" id="kochboxen-form">
            <div class="form-group">
                <label>Rezeptname</label>
                <input type="text" class="form-control" name="name" required>
            </div>
            <div class="form-group">
                <label>Menüart</label>
                <select class="form-control" id="courseSelection" required>
                    <option>--- Wählen Sie Ihr Wunschrezept aus ---</option>
                    <script>loadRecipeNamesForOrder();</script>
                </select>
            </div>
            <div class="form-group">
                <label>Region</label>
                <select class="form-control" id="styleSelection" required>
                    <option>--- Wählen Sie Ihr Wunschrezept aus ---</option>
                    <script>loadRecipeNamesForOrder();</script>
                </select>
            </div>
            <div class="form-group">
                <label>Zutaten</label>
                <textarea class="form-control" id="ingredients" name="ingredients" vresize required></textarea>
            </div>
            <div class="form-group">
                <label>Menge</label>
                <input id="ingredientAmount" type="number" class="form-control" name="ingredientAmount" min="1"
                       required>
            </div>
            <div class="form-group" id="orderBoxDate">
                <label>Maßeinheit</label>
                <input type="text" class="input-sm form-control" name="unit" required/>
            </div>
            <div class="form-group">
                <label>Preis p. Portion</label>
                <input id="price" type="text" class="form-control" name="price" required>
            </div>
            <button id="kochboxen-submit" type="submit" class="btn btn-sm btn-primary">Bestellung aufgeben</button>
        </form>
    </div>
</div>
</body>
<% include partials/footer %>
</html>

<script>
    $(document).on('ready', function () {
        if ($('#recipeSelection').find("option:first").val().indexOf('Wunschrezept') < -1) {
            $('#recipePrice').val($('#recipeSelection').find("option:first").val());
        } else {
            $('#recipePrice').val($('#recipeSelection').find("option:eq(1)").val());
        }

        $('#orderBoxDate .input-daterange').datepicker({
            startDate: 'today',
            format: 'dd. MM yyyy',
            clearBtn: true,
            keepEmptyValues: true
        });

        if ($('#kochboxen-submit').is(':disabled')) {
            $('[data-toggle="tooltip"]').tooltip();
        }
    });

    $(function () {
        $('#recipeSelection').change(function () {
            $('#recipePrice').val($(this).val());
            $('#recipeName').val($('#recipeSelection').find('option:selected').text());
        }).change();

        $('#bookingID').val(Util.generateUUID());
    });
</script>